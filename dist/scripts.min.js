function showModal(title){var modalContainer=$("#modal-container");modalContainer.html("");var modal=document.createElement("div");modal.classList.add("modal");var closeButtonElement=document.createElement("button");closeButtonElement.classList.add("modal-close","btn","btn-secondary");closeButtonElement.innerText="Close";closeButtonElement.addEventListener("click",hideModal);var titleElement=document.createElement("h1");titleElement.innerText=title;modal.appendChild(closeButtonElement);modal.appendChild(titleElement);modalContainer.append(modal);modalContainer.addClass("is-visible");window.addEventListener("keydown",(e)=>{var modalContainer=$("#modal-container");if(e.key==="Escape"&&modalContainer.hasClass("is-visible")){hideModal();}});modalContainer.click(function(e){var target=e.target;if(target===modalContainer){hideModal();}});} var modalContainer=$("#modal-container");var dialogPromiseReject;function hideModal(){modalContainer.removeClass("is-visible");if(dialogPromiseReject){dialogPromiseReject();dialogPromiseReject=null;}} var dogBreedRepository=(function(){var dogBreedsList=[];var apiUrl='https://dog.ceo/api/breeds/list/all';function addListItem(dogBreed){var dogBreedsList=$('.dog-breed-list');var button=document.createElement('button');button.innerText=dogBreed.name;button.classList.add("list-group-item","list-group-item-action","dog-breed");var dataAttribute=document.createAttribute('data-toggle');dataAttribute.value='modal';button.setAttributeNode(dataAttribute);var targetAttribute=document.createAttribute('data-target');targetAttribute.value='#breedModal';button.setAttributeNode(targetAttribute);button.addEventListener('click',function(){showDetails(dogBreed)}) dogBreedsList.append(button);} function showDetails(dogBreed){loadDetails(dogBreed).then(function(){$('#breedLabel').html(dogBreed.name);var modal=modalContainer.find(".modal");var imageTag=document.createElement("img");imageTag.src=dogBreed.imageUrl;modal.append(imageTag);$('.modal-body').html('') $('.modal-body').append(imageTag);});} function add(dogBreed){dogBreedsList.push(dogBreed);} function loadList(){return $.ajax(apiUrl,{dataType:'json'}).then(function(json){Object.keys(json.message).forEach(function(name){var dogBreed={name:name,detailsUrl:"https://dog.ceo/api/breed/"+name+"/images/random"};add(dogBreed);});}).catch(function(e){console.error(e);})} function getAll(){return dogBreedsList;} function loadDetails(item){var url=item.detailsUrl;return $.ajax(url,{dataType:'json'}).then(function(details){item.imageUrl=details.message;}).catch(function(e){console.error(e);});} return{add:add,getAll:getAll,addListItem:addListItem,loadList:loadList,loadDetails:loadDetails,};})();dogBreedRepository.loadList().then(function(){dogBreedRepository.getAll().forEach(function(breed){dogBreedRepository.addListItem(breed);});})
